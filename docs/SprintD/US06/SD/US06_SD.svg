<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1603px" preserveAspectRatio="none" style="width:3031px;height:1603px;background:#FFFFFF;" version="1.1" viewBox="0 0 3031 1603" width="3031px" zoomAndPan="magnify"><defs><filter height="300%" id="fky4c0f0ugmff" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="1409.2266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="21" y="99.6094"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="271.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="279" y="121.9609"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="452" y="152.3125"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="766" y="212.6641"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="766" y="273.0156"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="766" y="333.3672"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="188.7891" style="stroke:#A80036;stroke-width:1.0;" width="10" x="856.5" y="393.7188"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="745.9219" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1286.5" y="653.2109"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="198.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1291.5" y="1148.375"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="39" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1286.5" y="1469.8359"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1669.5" y="552.5078"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1669.5" y="653.2109"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1669.5" y="1469.8359"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1790.5" y="713.5625"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1951.5" y="773.9141"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2095.5" y="859.6172"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2095.5" y="1301.7813"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2251" y="945.3203"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2374.5" y="1005.6719"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2522" y="1066.0234"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2684.5" y="1209.0781"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2778" y="1369.1328"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="292.1094" style="stroke:#000000;stroke-width:2.0;" width="1473" x="1176.5" y="818.9141"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="199.4063" style="stroke:#000000;stroke-width:2.0;" width="1453" x="1186.5" y="904.6172"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="78.7031" style="stroke:#000000;stroke-width:2.0;" width="1563" x="1186.5" y="1168.375"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="78.7031" style="stroke:#000000;stroke-width:2.0;" width="991" x="1186.5" y="1261.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="283.5" x2="283.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="456.5" x2="456.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="770.5" x2="770.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="861.5" x2="861.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1291.5" x2="1291.5" y1="443.8281" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1674.5" x2="1674.5" y1="508.0469" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1795.5" x2="1795.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1956.5" x2="1956.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2100.5" x2="2100.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2255.5" x2="2255.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2379.5" x2="2379.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2526.5" x2="2526.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2689.5" x2="2689.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2782.5" x2="2782.5" y1="89.6094" y2="1517.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2923.5" x2="2923.5" y1="89.6094" y2="1517.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="86.5332">Timer</text><ellipse cx="26" cy="15" fill="#FEFECE" filter="url(#fky4c0f0ugmff)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M26,23 L26,50 M13,31 L39,31 M26,50 L13,65 M26,50 L39,65 " fill="none" filter="url(#fky4c0f0ugmff)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="1531.3691">Timer</text><ellipse cx="26" cy="1544.4453" fill="#FEFECE" filter="url(#fky4c0f0ugmff)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M26,1552.4453 L26,1579.4453 M13,1560.4453 L39,1560.4453 M26,1579.4453 L13,1594.4453 M26,1579.4453 L39,1594.4453 " fill="none" filter="url(#fky4c0f0ugmff)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="39" x="262.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="269.5" y="74.5332">App</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="39" x="262.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="269.5" y="1538.3691">App</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="105" x="402.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="409.5" y="74.5332">PropertiesUtils</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="105" x="402.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="409.5" y="1538.3691">PropertiesUtils</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="79" x="729.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="749" y="56.9238">props:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="736.5" y="74.5332">Properties</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="79" x="729.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="749" y="1538.3691">props:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="736.5" y="1555.9785">Properties</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="74" x="822.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="829.5" y="74.5332">Company</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="74" x="822.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="829.5" y="1538.3691">Company</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="186" x="1196.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1274.5" y="1538.3691">task:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="1203.5" y="1555.9785">ExportDailyVaccinatedTask</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="50" x="1647.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1655" y="1538.3691">timer:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1654.5" y="1555.9785">Timer</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="164" x="1711.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1752.5" y="56.9238">vacCenterSt:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="1718.5" y="74.5332">VaccinationCenterStore</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="164" x="1711.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1752.5" y="1538.3691">vacCenterSt:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="1718.5" y="1555.9785">VaccinationCenterStore</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="130" x="1889.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1919" y="56.9238">vacTypeSt:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1896.5" y="74.5332">VaccineTypeStore</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="130" x="1889.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1919" y="1538.3691">vacTypeSt:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1896.5" y="1555.9785">VaccineTypeStore</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="130" x="2033.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="2076.5" y="56.9238">center:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="2040.5" y="74.5332">VaccinationCenter</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="130" x="2033.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="2076.5" y="1538.3691">center:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="2040.5" y="1555.9785">VaccinationCenter</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="153" x="2177.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="2221.5" y="56.9238">vacAdmin:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="2184.5" y="74.5332">VaccineAdministration</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="153" x="2177.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="2221.5" y="1538.3691">vacAdmin:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="2184.5" y="1555.9785">VaccineAdministration</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="66" x="2344.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="2351.5" y="56.9238">vaccine:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="2352.5" y="74.5332">Vaccine</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="66" x="2344.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="2351.5" y="1538.3691">vaccine:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="2352.5" y="1555.9785">Vaccine</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="66.8281" style="stroke:#A80036;stroke-width:1.5;" width="201" x="2424.5" y="17.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="2495.5" y="39.3145">dataMap:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="2431.5" y="56.9238">HashMap&lt;VaccinationCenter,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="2433" y="74.5332">HashMap&lt;VaccineType,Int&gt;&gt;</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="66.8281" style="stroke:#A80036;stroke-width:1.5;" width="201" x="2424.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="2495.5" y="1538.3691">dataMap:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="2431.5" y="1555.9785">HashMap&lt;VaccinationCenter,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="2433" y="1573.5879">HashMap&lt;VaccineType,Int&gt;&gt;</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="96" x="2639.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="2658.5" y="56.9238">vacType:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="2646.5" y="74.5332">VaccineType</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="96" x="2639.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="2658.5" y="1538.3691">vacType:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="2646.5" y="1555.9785">VaccineType</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="63" x="2749.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="2756.5" y="74.5332">FileUtils</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="63" x="2749.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="2756.5" y="1538.3691">FileUtils</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="191" x="2826.5" y="35.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="2878.5" y="56.9238">vacAdminList:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="2833.5" y="74.5332">List&lt;VaccineAdministration&gt;</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="191" x="2826.5" y="1516.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="2878.5" y="1538.3691">vacAdminList:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="2833.5" y="1555.9785">List&lt;VaccineAdministration&gt;</text><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="1409.2266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="21" y="99.6094"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="271.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="279" y="121.9609"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="452" y="152.3125"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="766" y="212.6641"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="766" y="273.0156"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="766" y="333.3672"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="188.7891" style="stroke:#A80036;stroke-width:1.0;" width="10" x="856.5" y="393.7188"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="745.9219" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1286.5" y="653.2109"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="198.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1291.5" y="1148.375"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="39" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1286.5" y="1469.8359"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1669.5" y="552.5078"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1669.5" y="653.2109"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1669.5" y="1469.8359"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1790.5" y="713.5625"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1951.5" y="773.9141"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2095.5" y="859.6172"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2095.5" y="1301.7813"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2251" y="945.3203"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2374.5" y="1005.6719"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2522" y="1066.0234"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2684.5" y="1209.0781"/><rect fill="#FFFFFF" filter="url(#fky4c0f0ugmff)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2778" y="1369.1328"/><polygon fill="#A80036" points="267,117.9609,277,121.9609,267,125.9609,271,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="273" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="38" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="49" y="117.1045">Asks to export daily vaccinated report</text><polygon fill="#A80036" points="440,148.3125,450,152.3125,440,156.3125,444,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="289" x2="446" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="296" y="147.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="307" y="147.4561">props = getProperties()</text><polygon fill="#A80036" points="754,208.6641,764,212.6641,754,216.6641,758,212.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="289" x2="760" y1="212.6641" y2="212.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="296" y="207.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="390" x="307" y="207.8076">filePath = getProperty(Constants.PARAMS_EXPORTATION_PATH)</text><polygon fill="#A80036" points="754,269.0156,764,273.0156,754,277.0156,758,273.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="289" x2="760" y1="273.0156" y2="273.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="296" y="268.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="368" x="307" y="268.1592">time = getProperty(Constants.PARAMS_EXPORTATION_TIME)</text><polygon fill="#A80036" points="754,329.3672,764,333.3672,754,337.3672,758,333.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="289" x2="760" y1="333.3672" y2="333.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="296" y="328.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="447" x="307" y="328.5107">separator = getProperty(Constants.PARAMS_EXPORTATION_SEPARATOR)</text><polygon fill="#A80036" points="844.5,389.7188,854.5,393.7188,844.5,397.7188,848.5,393.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="284" x2="850.5" y1="393.7188" y2="393.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="291" y="388.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="365" x="302" y="388.8623">scheduleDailyVaccinated(filePath, time, separator, timeInterval)</text><polygon fill="#A80036" points="1184.5,420.0703,1194.5,424.0703,1184.5,428.0703,1188.5,424.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="866.5" x2="1190.5" y1="424.0703" y2="424.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="873.5" y="419.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="884.5" y="419.2139">create(filePath, separator, vacCenterSt, vacTypeSt)</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="186" x="1196.5" y="401.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1274.5" y="423.252">task:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="1203.5" y="440.8613">ExportDailyVaccinatedTask</text><polygon fill="#A80036" points="1635.5,484.2891,1645.5,488.2891,1635.5,492.2891,1639.5,488.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="866.5" x2="1641.5" y1="488.2891" y2="488.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="873.5" y="483.4326">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="884.5" y="483.4326">create()</text><rect fill="#FEFECE" filter="url(#fky4c0f0ugmff)" height="49.2188" style="stroke:#A80036;stroke-width:1.5;" width="50" x="1647.5" y="465.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="1655" y="487.4707">timer:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1654.5" y="505.0801">Timer</text><polygon fill="#A80036" points="1657.5,548.5078,1667.5,552.5078,1657.5,556.5078,1661.5,552.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="866.5" x2="1663.5" y1="552.5078" y2="552.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="873.5" y="547.6514">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="884.5" y="547.6514">scheduleAtFixedRate(task, firstTime, period)</text><path d="M1296,595.5078 L1296,621.5078 L1651,621.5078 L1651,605.5078 L1641,595.5078 L1296,595.5078 " fill="#FBFB77" filter="url(#fky4c0f0ugmff)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1641,595.5078 L1641,605.5078 L1651,605.5078 L1641,595.5078 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334" x="1302" y="614.0029">After the time to the specifiede date and time has elapsed</text><polygon fill="#A80036" points="1307.5,649.2109,1297.5,653.2109,1307.5,657.2109,1303.5,653.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1301.5" x2="1668.5" y1="653.2109" y2="653.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1313.5" y="648.3545">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="1331.5" y="648.3545">run()</text><polygon fill="#A80036" points="1778.5,709.5625,1788.5,713.5625,1778.5,717.5625,1782.5,713.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1296.5" x2="1784.5" y1="713.5625" y2="713.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1303.5" y="708.7061">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="1321.5" y="708.7061">centerLst = getVaccinationCenters()</text><polygon fill="#A80036" points="1939.5,769.9141,1949.5,773.9141,1939.5,777.9141,1943.5,773.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1296.5" x2="1945.5" y1="773.9141" y2="773.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1303.5" y="769.0576">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="1321.5" y="769.0576">vacTypeLst = getVaccineTypes()</text><path d="M1176.5,818.9141 L1249.5,818.9141 L1249.5,826.9141 L1239.5,836.9141 L1176.5,836.9141 L1176.5,818.9141 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="292.1094" style="stroke:#000000;stroke-width:2.0;" width="1473" x="1176.5" y="818.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1191.5" y="833.4092">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="153" x="1264.5" y="832.333">[foreach vaccination center]</text><polygon fill="#A80036" points="2083.5,855.6172,2093.5,859.6172,2083.5,863.6172,2087.5,859.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1296.5" x2="2089.5" y1="859.6172" y2="859.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1303.5" y="854.7607">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="289" x="1321.5" y="854.7607">vacAdminList = getVacAdminFromYesterdayList()</text><path d="M1186.5,904.6172 L1259.5,904.6172 L1259.5,912.6172 L1249.5,922.6172 L1186.5,922.6172 L1186.5,904.6172 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="199.4063" style="stroke:#000000;stroke-width:2.0;" width="1453" x="1186.5" y="904.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1201.5" y="919.1123">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="1274.5" y="918.0361">[foreach vaccine administration]</text><polygon fill="#A80036" points="2239,941.3203,2249,945.3203,2239,949.3203,2243,945.3203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1296.5" x2="2245" y1="945.3203" y2="945.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1303.5" y="940.4639">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="1321.5" y="940.4639">vaccine = getVaccine()</text><polygon fill="#A80036" points="2362.5,1001.6719,2372.5,1005.6719,2362.5,1009.6719,2366.5,1005.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1296.5" x2="2368.5" y1="1005.6719" y2="1005.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1303.5" y="1000.8154">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="1321.5" y="1000.8154">vacType = getVacType()</text><polygon fill="#A80036" points="2510,1062.0234,2520,1066.0234,2510,1070.0234,2514,1066.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1296.5" x2="2516" y1="1066.0234" y2="1066.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1303.5" y="1061.167">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="1321.5" y="1061.167">merge(vacType, 1, sum)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1296.5" x2="1343.5" y1="1135.375" y2="1135.375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1343.5" x2="1343.5" y1="1135.375" y2="1148.375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1302.5" x2="1343.5" y1="1148.375" y2="1148.375"/><polygon fill="#A80036" points="1312.5,1144.375,1302.5,1148.375,1312.5,1152.375,1308.5,1148.375" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1308.5" y="1130.5186">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="341" x="1326.5" y="1130.5186">content = convertToString(centerLst, vacTypeLst, dataMap)</text><path d="M1186.5,1168.375 L1259.5,1168.375 L1259.5,1176.375 L1249.5,1186.375 L1186.5,1186.375 L1186.5,1168.375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="78.7031" style="stroke:#000000;stroke-width:2.0;" width="1563" x="1186.5" y="1168.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1201.5" y="1182.8701">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="1274.5" y="1181.7939">[foreach vacType]</text><polygon fill="#A80036" points="2672.5,1205.0781,2682.5,1209.0781,2672.5,1213.0781,2676.5,1209.0781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1301.5" x2="2678.5" y1="1209.0781" y2="1209.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1308.5" y="1204.2217">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1326.5" y="1204.2217">getDescription()</text><path d="M1186.5,1261.0781 L1259.5,1261.0781 L1259.5,1269.0781 L1249.5,1279.0781 L1186.5,1279.0781 L1186.5,1261.0781 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="78.7031" style="stroke:#000000;stroke-width:2.0;" width="991" x="1186.5" y="1261.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1201.5" y="1275.5732">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89" x="1274.5" y="1274.4971">[foreach center]</text><polygon fill="#A80036" points="2083.5,1297.7813,2093.5,1301.7813,2083.5,1305.7813,2087.5,1301.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1301.5" x2="2089.5" y1="1301.7813" y2="1301.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1308.5" y="1296.9248">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="1326.5" y="1296.9248">getName()</text><polygon fill="#A80036" points="2766,1365.1328,2776,1369.1328,2766,1373.1328,2770,1369.1328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1296.5" x2="2772" y1="1369.1328" y2="1369.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1303.5" y="1364.2764">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="1321.5" y="1364.2764">writeToFile(filepath, content)</text><path d="M1296,1412.1328 L1296,1438.1328 L1702,1438.1328 L1702,1422.1328 L1692,1412.1328 L1296,1412.1328 " fill="#FBFB77" filter="url(#fky4c0f0ugmff)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1692,1412.1328 L1692,1422.1328 L1702,1422.1328 L1692,1412.1328 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="385" x="1302" y="1430.6279">After period has elapsed the task will be runned again (message 6)</text><polygon fill="#A80036" points="1307.5,1465.8359,1297.5,1469.8359,1307.5,1473.8359,1303.5,1469.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1301.5" x2="1668.5" y1="1469.8359" y2="1469.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1313.5" y="1464.9795">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="1331.5" y="1464.9795">run()</text><!--MD5=[8b83b527541aab01eb4ea1a6c041592e]
@startuml
autonumber
'hide footbox

actor "Timer" as ACT


participant "App" as APP
participant "PropertiesUtils" as PROPSU
participant "props:\nProperties" as PROPS
participant "Company" as COMP
participant "task:\nExportDailyVaccinatedTask" as TASK
participant "timer:\nTimer" as TIMER
participant "vacCenterSt:\nVaccinationCenterStore" as VCST
participant "vacTypeSt:\nVaccineTypeStore" as VTST
participant "center:\nVaccinationCenter" as CENTER
participant "vacAdmin:\nVaccineAdministration" as VACADMIN
participant "vaccine:\nVaccine" as VAC
participant "dataMap:\nHashMap<VaccinationCenter,\nHashMap<VaccineType,Int>>" as MAP
participant "vacType:\nVaccineType" as VACTYPE
participant "FileUtils" as FILEUTILS
participant "vacAdminList:\nList<VaccineAdministration>" as VALST

    activate ACT
    ACT -> APP : Asks to export daily vaccinated report
    activate APP
    APP -> PROPSU : props = getProperties()
    activate PROPSU
    deactivate PROPSU
    APP -> PROPS : filePath = getProperty(Constants.PARAMS_EXPORTATION_PATH)
    activate PROPS
    deactivate PROPS
    APP -> PROPS : time = getProperty(Constants.PARAMS_EXPORTATION_TIME)
    activate PROPS
    deactivate PROPS
    APP -> PROPS : separator = getProperty(Constants.PARAMS_EXPORTATION_SEPARATOR)
    activate PROPS
    deactivate PROPS
    APP-> COMP : scheduleDailyVaccinated(filePath, time, separator, timeInterval)
    deactivate APP
        
        activate COMP
        COMP - -> TASK ** : create(filePath, separator, vacCenterSt, vacTypeSt)
        COMP - -> TIMER ** : create()

        COMP -> TIMER : scheduleAtFixedRate(task, firstTime, period)
        activate TIMER
        deactivate TIMER

        note right TASK 
            After the time to the specifiede date and time has elapsed
        end note 
        
    deactivate COMP

        TIMER -> TASK : run()
        activate TIMER
        deactivate TIMER
        activate TASK
            TASK -> VCST : centerLst = getVaccinationCenters()
            activate VCST
            deactivate VCST

            TASK -> VTST : vacTypeLst = getVaccineTypes()
            activate VTST
            deactivate VTST

            loop foreach vaccination center
                TASK -> CENTER : vacAdminList = getVacAdminFromYesterdayList()
                activate CENTER
                deactivate CENTER

                loop foreach vaccine administration
                    TASK -> VACADMIN : vaccine = getVaccine()
                    activate VACADMIN
                    deactivate VACADMIN

                    TASK -> VAC : vacType = getVacType()
                    activate VAC
                    deactivate VAC

                    TASK -> MAP : merge(vacType, 1, sum)
                    activate MAP
                    deactivate MAP
                end
            end

            TASK -> TASK : content = convertToString(centerLst, vacTypeLst, dataMap)
            activate TASK
                loop foreach vacType
                    TASK -> VACTYPE : getDescription()
                    activate VACTYPE
                    deactivate VACTYPE
                end
                loop foreach center
                    TASK -> CENTER : getName()
                    activate CENTER
                    deactivate CENTER
                end
            deactivate TASK
            TASK -> FILEUTILS : writeToFile(filepath, content)
            activate FILEUTILS
            deactivate FILEUTILS

        deactivate TASK

        note right TASK 
            After period has elapsed the task will be runned again (message 6)
        end note 
        TIMER -> TASK : run()
        activate TIMER
        deactivate TIMER
        activate TASK

@enduml 

@startuml
autonumber

actor "Timer" as ACT


participant "App" as APP
participant "PropertiesUtils" as PROPSU
participant "props:\nProperties" as PROPS
participant "Company" as COMP
participant "task:\nExportDailyVaccinatedTask" as TASK
participant "timer:\nTimer" as TIMER
participant "vacCenterSt:\nVaccinationCenterStore" as VCST
participant "vacTypeSt:\nVaccineTypeStore" as VTST
participant "center:\nVaccinationCenter" as CENTER
participant "vacAdmin:\nVaccineAdministration" as VACADMIN
participant "vaccine:\nVaccine" as VAC
participant "dataMap:\nHashMap<VaccinationCenter,\nHashMap<VaccineType,Int>>" as MAP
participant "vacType:\nVaccineType" as VACTYPE
participant "FileUtils" as FILEUTILS
participant "vacAdminList:\nList<VaccineAdministration>" as VALST

    activate ACT
    ACT -> APP : Asks to export daily vaccinated report
    activate APP
    APP -> PROPSU : props = getProperties()
    activate PROPSU
    deactivate PROPSU
    APP -> PROPS : filePath = getProperty(Constants.PARAMS_EXPORTATION_PATH)
    activate PROPS
    deactivate PROPS
    APP -> PROPS : time = getProperty(Constants.PARAMS_EXPORTATION_TIME)
    activate PROPS
    deactivate PROPS
    APP -> PROPS : separator = getProperty(Constants.PARAMS_EXPORTATION_SEPARATOR)
    activate PROPS
    deactivate PROPS
    APP-> COMP : scheduleDailyVaccinated(filePath, time, separator, timeInterval)
    deactivate APP
        
        activate COMP
        COMP - -> TASK ** : create(filePath, separator, vacCenterSt, vacTypeSt)
        COMP - -> TIMER ** : create()

        COMP -> TIMER : scheduleAtFixedRate(task, firstTime, period)
        activate TIMER
        deactivate TIMER

        note right TASK 
            After the time to the specifiede date and time has elapsed
        end note 
        
    deactivate COMP

        TIMER -> TASK : run()
        activate TIMER
        deactivate TIMER
        activate TASK
            TASK -> VCST : centerLst = getVaccinationCenters()
            activate VCST
            deactivate VCST

            TASK -> VTST : vacTypeLst = getVaccineTypes()
            activate VTST
            deactivate VTST

            loop foreach vaccination center
                TASK -> CENTER : vacAdminList = getVacAdminFromYesterdayList()
                activate CENTER
                deactivate CENTER

                loop foreach vaccine administration
                    TASK -> VACADMIN : vaccine = getVaccine()
                    activate VACADMIN
                    deactivate VACADMIN

                    TASK -> VAC : vacType = getVacType()
                    activate VAC
                    deactivate VAC

                    TASK -> MAP : merge(vacType, 1, sum)
                    activate MAP
                    deactivate MAP
                end
            end

            TASK -> TASK : content = convertToString(centerLst, vacTypeLst, dataMap)
            activate TASK
                loop foreach vacType
                    TASK -> VACTYPE : getDescription()
                    activate VACTYPE
                    deactivate VACTYPE
                end
                loop foreach center
                    TASK -> CENTER : getName()
                    activate CENTER
                    deactivate CENTER
                end
            deactivate TASK
            TASK -> FILEUTILS : writeToFile(filepath, content)
            activate FILEUTILS
            deactivate FILEUTILS

        deactivate TASK

        note right TASK 
            After period has elapsed the task will be runned again (message 6)
        end note 
        TIMER -> TASK : run()
        activate TIMER
        deactivate TIMER
        activate TASK

@enduml 

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 WET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>