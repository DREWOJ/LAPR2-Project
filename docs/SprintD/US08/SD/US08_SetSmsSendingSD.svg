<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="844px" preserveAspectRatio="none" style="width:2162px;height:844px;background:#FFFFFF;" version="1.1" viewBox="0 0 2162 844" width="2162px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="691.3203" style="stroke:#181818;stroke-width:1.0;" width="10" x="396" y="83.7266"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="668" y="171.9922"/><rect fill="#FFFFFF" height="370.4961" style="stroke:#181818;stroke-width:1.0;" width="10" x="767.5" y="404.5508"/><rect fill="#FFFFFF" height="295.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="1036.5" y="479.3828"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1360.5" y="112.8594"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1360.5" y="508.5156"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1525.5" y="626.7813"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1676" y="567.6484"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1855" y="241.6914"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2017" y="685.9141"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2119" y="745.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="401" x2="401" y1="52.5938" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="673" x2="673" y1="52.5938" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="772" x2="772" y1="362.2031" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1041" x2="1041" y1="320.9063" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1365.5" x2="1365.5" y1="52.5938" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1530.5" x2="1530.5" y1="52.5938" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1680.5" x2="1680.5" y1="52.5938" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1859.5" x2="1859.5" y1="52.5938" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2021.5" x2="2021.5" y1="52.5938" y2="793.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2123.5" x2="2123.5" y1="52.5938" y2="793.0469"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="297" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="307.5" y="24.9951">vaccineAdministrationList</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="304" y="41.292">:VaccineAdministrationList</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="297" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="307.5" y="812.042">vaccineAdministrationList</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="304" y="828.3389">:VaccineAdministrationList</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="634" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="646" y="24.9951">snsUser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="641" y="41.292">:SNSUser</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="634" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="646" y="812.042">snsUser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="641" y="828.3389">:SNSUser</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="722" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="729" y="812.042">timer:Timer</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="417" x="833" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="840" y="812.042">removeRecoveryRoomTask:RemoveRecoveryRoomTask</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="1274.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="1285" y="24.9951">vaccineAdministration</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="1281.5" y="41.292">:VaccineAdministration</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="1274.5" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="1285" y="812.042">vaccineAdministration</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="1281.5" y="828.3389">:VaccineAdministration</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="1466.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1478" y="24.9951">recoveryRoom</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1473.5" y="41.292">:RecoveryRoom</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="1466.5" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1478" y="812.042">recoveryRoom</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1473.5" y="828.3389">:RecoveryRoom</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="1604.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="1615" y="24.9951">vaccinationCenter</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1611.5" y="41.292">:VaccinationCenter</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="1604.5" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="1615" y="812.042">vaccinationCenter</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1611.5" y="828.3389">:VaccinationCenter</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="1767.5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="1774.5" y="41.292">UserNotificationMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="1767.5" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="1774.5" y="812.042">UserNotificationMapper</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1962.5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1969.5" y="41.292">SenderFactory</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1962.5" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1969.5" y="812.042">SenderFactory</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="2091.5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="2098.5" y="41.292">Sender</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="2091.5" y="792.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="2098.5" y="812.042">Sender</text><rect fill="#FFFFFF" height="691.3203" style="stroke:#181818;stroke-width:1.0;" width="10" x="396" y="83.7266"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="668" y="171.9922"/><rect fill="#FFFFFF" height="370.4961" style="stroke:#181818;stroke-width:1.0;" width="10" x="767.5" y="404.5508"/><rect fill="#FFFFFF" height="295.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="1036.5" y="479.3828"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1360.5" y="112.8594"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1360.5" y="508.5156"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1525.5" y="626.7813"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1676" y="567.6484"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1855" y="241.6914"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2017" y="685.9141"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2119" y="745.0469"/><ellipse cx="7.5" cy="82.9766" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="384,79.7266,394,83.7266,384,87.7266,388,83.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="12" x2="390" y1="83.7266" y2="83.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="15" y="78.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="28" y="78.6606">setSmsSending(vaccineAdministration, recoveryPeriod)</text><polygon fill="#181818" points="1348.5,108.8594,1358.5,112.8594,1348.5,116.8594,1352.5,112.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="406" x2="1354.5" y1="112.8594" y2="112.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="413" y="107.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="426" y="107.7935">snsUser = getSnsUser()</text><polygon fill="#181818" points="656,167.9922,666,171.9922,656,175.9922,660,171.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="406" x2="662" y1="171.9922" y2="171.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="413" y="166.9263">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="425" y="166.9263">phoneNumber = getPhoneNumber()</text><polygon fill="#181818" points="1843,237.6914,1853,241.6914,1843,245.6914,1847,241.6914" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="406" x2="1849" y1="241.6914" y2="241.6914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="413" y="236.6255">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="426" y="236.6255">notificationDto = toDto(phoneNumber, message)</text><path d="M123,214.9922 L123,254.9922 L391,254.9922 L391,224.9922 L381,214.9922 L123,214.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M381,214.9922 L381,224.9922 L391,224.9922 L381,214.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="129" y="232.0591">message content indicates to the user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="129" y="247.1919">that his recovery period is over</text><polygon fill="#181818" points="821,307.3906,831,311.3906,821,315.3906,825,311.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="406" x2="827" y1="311.3906" y2="311.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="413" y="306.3247">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="340" x="426" y="306.3247">task = create(vaccineAdministration, notificationDto)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="417" x="833" y="290.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="840" y="310.2529">removeRecoveryRoomTask:RemoveRecoveryRoomTask</text><polygon fill="#181818" points="710,348.6875,720,352.6875,710,356.6875,714,352.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="406" x2="716" y1="352.6875" y2="352.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="413" y="347.6216">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="426" y="347.6216">create()</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="722" y="331.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="729" y="351.5498">timer:Timer</text><polygon fill="#181818" points="755.5,400.5508,765.5,404.5508,755.5,408.5508,759.5,404.5508" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="406" x2="761.5" y1="404.5508" y2="404.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="413" y="399.4849">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="426" y="399.4849">schedule(task, recoveryPeriod)</text><path d="M77,377.8516 L77,417.8516 L391,417.8516 L391,387.8516 L381,377.8516 L77,377.8516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M381,377.8516 L381,387.8516 L391,387.8516 L381,377.8516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="83" y="394.9185">recoveryPeriod represents a long value</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="83" y="410.0513">containing the recovery period in milliseconds</text><path d="M326,428.1172 L326,453.1172 L847,453.1172 L847,438.1172 L837,428.1172 L326,428.1172 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M837,428.1172 L837,438.1172 L847,438.1172 L837,428.1172 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="373" x="395.5" y="445.1841">After the time specified in the recoveryPeriod has elapsed</text><polygon fill="#181818" points="1024.5,475.3828,1034.5,479.3828,1024.5,483.3828,1028.5,479.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="777.5" x2="1030.5" y1="479.3828" y2="479.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="784.5" y="474.3169">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="797.5" y="474.3169">run()</text><polygon fill="#181818" points="1348.5,504.5156,1358.5,508.5156,1348.5,512.5156,1352.5,508.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1046.5" x2="1354.5" y1="508.5156" y2="508.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1053.5" y="503.4497">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="1066.5" y="503.4497">vaccinationCenter = getVaccinationCenter()</text><polygon fill="#181818" points="1664,563.6484,1674,567.6484,1664,571.6484,1668,567.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1046.5" x2="1670" y1="567.6484" y2="567.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1053.5" y="562.5825">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="1076.5" y="562.5825">recoveryRoom = getRecoveryRoom()</text><polygon fill="#181818" points="1513.5,622.7813,1523.5,626.7813,1513.5,630.7813,1517.5,626.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1046.5" x2="1519.5" y1="626.7813" y2="626.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1053.5" y="621.7153">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="345" x="1075.5" y="621.7153">removeVaccineAdministration(vaccineAdministration)</text><polygon fill="#181818" points="2005,681.9141,2015,685.9141,2005,689.9141,2009,685.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1046.5" x2="2011" y1="685.9141" y2="685.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1053.5" y="680.8481">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1075.5" y="680.8481">sender = getSender()</text><polygon fill="#181818" points="2107,741.0469,2117,745.0469,2107,749.0469,2111,745.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1046.5" x2="2113" y1="745.0469" y2="745.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1053.5" y="739.981">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1074.5" y="739.981">send(notificationDto)</text><!--MD5=[aa73ae2389fff11b8faf22d0d2f34fee]
@startuml
autonumber
' hide footbox

participant "vaccineAdministrationList\n:VaccineAdministrationList" as vaccineAdministrationList
participant "snsUser\n:SNSUser" as snsUser
participant "timer:Timer" as timer
participant "removeRecoveryRoomTask:RemoveRecoveryRoomTask" as removeRecoveryRoomTask
participant "vaccineAdministration\n:VaccineAdministration" as vaccineAdministration
participant "recoveryRoom\n:RecoveryRoom" as recoveryRoom
participant "vaccinationCenter\n:VaccinationCenter" as vaccinationCenter
participant "UserNotificationMapper" as userNotificationMapper
participant "SenderFactory" as senderFactory
participant "Sender" as sender

[o-> vaccineAdministrationList : setSmsSending(vaccineAdministration, recoveryPeriod)
activate vaccineAdministrationList
  vaccineAdministrationList -> vaccineAdministration : snsUser = getSnsUser()
  activate vaccineAdministration
  deactivate vaccineAdministration
  vaccineAdministrationList -> snsUser : phoneNumber = getPhoneNumber()
  activate snsUser
  deactivate snsUser
  vaccineAdministrationList -> userNotificationMapper : notificationDto = toDto(phoneNumber, message)
  activate userNotificationMapper
  deactivate userNotificationMapper
  note left
    message content indicates to the user
    that his recovery period is over
  end note
  vaccineAdministrationList -> removeRecoveryRoomTask** : task = create(vaccineAdministration, notificationDto)
  vaccineAdministrationList -> timer** : create()
  vaccineAdministrationList -> timer : schedule(task, recoveryPeriod)
  note left
    recoveryPeriod represents a long value
    containing the recovery period in milliseconds
  end note
  activate timer
    note over timer, vaccineAdministrationList
      After the time specified in the recoveryPeriod has elapsed
    end note
    timer -> removeRecoveryRoomTask : run()
    activate removeRecoveryRoomTask
      removeRecoveryRoomTask -> vaccineAdministration : vaccinationCenter = getVaccinationCenter()
      activate vaccineAdministration
      deactivate vaccineAdministration
      removeRecoveryRoomTask -> vaccinationCenter : recoveryRoom = getRecoveryRoom()
      activate vaccinationCenter
      deactivate vaccinationCenter
      removeRecoveryRoomTask -> recoveryRoom : removeVaccineAdministration(vaccineAdministration)
      activate recoveryRoom
      deactivate recoveryRoom
      removeRecoveryRoomTask -> senderFactory : sender = getSender()
      activate senderFactory
      deactivate senderFactory
      removeRecoveryRoomTask -> sender : send(notificationDto)
      activate sender
      deactivate sender
    deactivate removeRecoveryRoomTask
  deactivate timer
deactivate vaccineAdministrationList
@enduml

@startuml
autonumber

participant "vaccineAdministrationList\n:VaccineAdministrationList" as vaccineAdministrationList
participant "snsUser\n:SNSUser" as snsUser
participant "timer:Timer" as timer
participant "removeRecoveryRoomTask:RemoveRecoveryRoomTask" as removeRecoveryRoomTask
participant "vaccineAdministration\n:VaccineAdministration" as vaccineAdministration
participant "recoveryRoom\n:RecoveryRoom" as recoveryRoom
participant "vaccinationCenter\n:VaccinationCenter" as vaccinationCenter
participant "UserNotificationMapper" as userNotificationMapper
participant "SenderFactory" as senderFactory
participant "Sender" as sender

[o-> vaccineAdministrationList : setSmsSending(vaccineAdministration, recoveryPeriod)
activate vaccineAdministrationList
  vaccineAdministrationList -> vaccineAdministration : snsUser = getSnsUser()
  activate vaccineAdministration
  deactivate vaccineAdministration
  vaccineAdministrationList -> snsUser : phoneNumber = getPhoneNumber()
  activate snsUser
  deactivate snsUser
  vaccineAdministrationList -> userNotificationMapper : notificationDto = toDto(phoneNumber, message)
  activate userNotificationMapper
  deactivate userNotificationMapper
  note left
    message content indicates to the user
    that his recovery period is over
  end note
  vaccineAdministrationList -> removeRecoveryRoomTask** : task = create(vaccineAdministration, notificationDto)
  vaccineAdministrationList -> timer** : create()
  vaccineAdministrationList -> timer : schedule(task, recoveryPeriod)
  note left
    recoveryPeriod represents a long value
    containing the recovery period in milliseconds
  end note
  activate timer
    note over timer, vaccineAdministrationList
      After the time specified in the recoveryPeriod has elapsed
    end note
    timer -> removeRecoveryRoomTask : run()
    activate removeRecoveryRoomTask
      removeRecoveryRoomTask -> vaccineAdministration : vaccinationCenter = getVaccinationCenter()
      activate vaccineAdministration
      deactivate vaccineAdministration
      removeRecoveryRoomTask -> vaccinationCenter : recoveryRoom = getRecoveryRoom()
      activate vaccinationCenter
      deactivate vaccinationCenter
      removeRecoveryRoomTask -> recoveryRoom : removeVaccineAdministration(vaccineAdministration)
      activate recoveryRoom
      deactivate recoveryRoom
      removeRecoveryRoomTask -> senderFactory : sender = getSender()
      activate senderFactory
      deactivate senderFactory
      removeRecoveryRoomTask -> sender : send(notificationDto)
      activate sender
      deactivate sender
    deactivate removeRecoveryRoomTask
  deactivate timer
deactivate vaccineAdministrationList
@enduml

PlantUML version 1.2022.6beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>