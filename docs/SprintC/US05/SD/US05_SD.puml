@startuml
autonumber
'hide footbox
actor "Nurse" as NURSE

participant ":ListUsersInWaitingRoomUI" as UI
participant ":ListUsersInWaitingRoomController" as CTRL
participant "comp\n:Company" as COMP
participant "waitingRoomStore\n:EmployeeStore" as EMPS
participant "waitingRoomStore\n:EmployeeStore" as EMPS
participant "user:User" as USER
participant "vaccinationCenterStore\n:VaccinationCenterStore" as VACS

activate NURSE
NURSE -> UI : asks to list users in waiting room for a given vaccination center
activate UI
activate CTRL
UI -> CTRL : vaccinationCenter=getVaccinationCenters()
CTRL -> COMP : vaccinationCenterStore=getVaccinationCenterStore()
activate COMP
deactivate COMP

CTRL -> VACS : vaccinationCenters=getVaccinationCenters()
activate VACS
|||
deactivate VACS
deactivate CTRL

UI --> NURSE : shows all vaccination centers and asks to select one
deactivate UI

NURSE -> UI : selects an employee role
activate UI

UI -> CTRL : getEmployeesWithRole(roleId)
activate CTRL

CTRL -> COMP: getEmployeeStore()
activate COMP
deactivate COMP
CTRL -> EMPS: getEmployeesWithRole(roleId)
activate EMPS
deactivate EMPS
EMPS -> ROLES: existsRole(roleId)
activate ROLES
deactivate ROLES
create "lstEmp\n:List<Employee>" as LST
EMPS --> LST

loop for each employee
    EMPS -> USER: e=employee.hasRoleId(roleId)
  activate USER
    USER --> EMPS: true/false
  deactivate USER
    alt e==true
        EMPS -> LST: add(employee)
      activate LST
    |||
    deactivate LST
    end
end

CTRL --> UI: lstEmp

deactivate COMP
deactivate CTRL
UI --> NURSE : informs operation success
UI --> NURSE: shows the list of employees
deactivate UI

deactivate UI
deactivate CTRL
deactivate NURSE

participant "roleList:\nList<UserRole>"

@enduml
