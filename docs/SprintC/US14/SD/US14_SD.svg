<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1776px" preserveAspectRatio="none" style="width:2639px;height:1776px;background:#FFFFFF;" version="1.1" viewBox="0 0 2639 1776" width="2639px" zoomAndPan="magnify"><defs><filter height="300%" id="f1f1omeaimtvao" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="1573.375" style="stroke:#A80036;stroke-width:1.0;" width="10" x="59.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="387.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="1072.25" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="600.7344"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="327.0156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="575.5" y="213.0156"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="1019.5469" style="stroke:#A80036;stroke-width:1.0;" width="10" x="575.5" y="631.0859"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="286.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="913.5" y="253.3672"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="918.5" y="297.9766"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="918.5" y="371.3281"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="918.5" y="444.6797"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="913.5" y="686.7891"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="881.4922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1121.5" y="747.1406"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="35.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1126.5" y="851.1953"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="252.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1126.5" y="941.1563"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1131.5" y="1165.5625"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="389.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1126.5" y="1238.9141"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1131.5" y="1600.6328"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1400.5" y="510.0313"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1400.5" y="1036.8594"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="211.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1559.5" y="1274.2656"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2029.5" y="976.5078"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2029.5" y="1304.6172"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2029.5" y="1364.9688"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2168.5" y="1425.3203"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318" y="1097.2109"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318" y="1532.2813"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="881.4922" style="stroke:#000000;stroke-width:2.0;" width="1360.5" x="1038" y="762.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="89.6094" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="281" x2="281" y1="89.6094" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="580" x2="580" y1="89.6094" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="918.5" x2="918.5" y1="254.3203" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1126" x2="1126" y1="89.6094" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1405.5" x2="1405.5" y1="89.6094" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1564.5" x2="1564.5" y1="89.6094" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1907.5" x2="1907.5" y1="1496.625" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2034.5" x2="2034.5" y1="897.5" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2173.5" x2="2173.5" y1="89.6094" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2322.5" x2="2322.5" y1="89.6094" y2="1690.9844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2513.5" x2="2513.5" y1="89.6094" y2="1690.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="20" y="86.5332">Administrator</text><ellipse cx="64.5" cy="15" fill="#FEFECE" filter="url(#f1f1omeaimtvao)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M64.5,23 L64.5,50 M51.5,31 L77.5,31 M64.5,50 L51.5,65 M64.5,50 L77.5,65 " fill="none" filter="url(#f1f1omeaimtvao)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="20" y="1704.5176">Administrator</text><ellipse cx="64.5" cy="1717.5938" fill="#FEFECE" filter="url(#f1f1omeaimtvao)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M64.5,1725.5938 L64.5,1752.5938 M51.5,1733.5938 L77.5,1733.5938 M64.5,1752.5938 L51.5,1767.5938 M64.5,1752.5938 L77.5,1767.5938 " fill="none" filter="url(#f1f1omeaimtvao)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="159" x="200" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="207" y="74.5332">:UploadUserFromFileUI</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="159" x="200" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="207" y="1711.5176">:UploadUserFromFileUI</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="189" x="484" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="491" y="74.5332">:RegisterSNSUserController</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="189" x="484" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="491" y="1711.5176">:RegisterSNSUserController</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="854.5" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="861.5" y="1711.5176">csvR:CSVReader</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="153" x="1048" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1055" y="74.5332">userSt :SNSUserStore</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="153" x="1048" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1055" y="1711.5176">userSt :SNSUserStore</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1345.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1352.5" y="74.5332">comp :Company</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1345.5" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1352.5" y="1711.5176">comp :Company</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="174" x="1475.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="1482.5" y="74.5332">mapper: SNSUserMapper</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="174" x="1475.5" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="1482.5" y="1711.5176">mapper: SNSUserMapper</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="120" x="1845.5" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1852.5" y="1711.5176">dto: SNSUserDto</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="106" x="1979.5" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="1986.5" y="1711.5176">user :SNSUser</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="144" x="2099.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2106.5" y="74.5332">:PasswordGenerator</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="144" x="2099.5" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2106.5" y="1711.5176">:PasswordGenerator</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="127" x="2257.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="2264.5" y="74.5332">auth :AuthFacade</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="127" x="2257.5" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="2264.5" y="1711.5176">auth :AuthFacade</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="227" x="2398.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="2405.5" y="74.5332">userDataList :List&lt;Array&lt;String&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="227" x="2398.5" y="1689.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="2405.5" y="1711.5176">userDataList :List&lt;Array&lt;String&gt;&gt;</text><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="1573.375" style="stroke:#A80036;stroke-width:1.0;" width="10" x="59.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="387.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="1072.25" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="600.7344"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="327.0156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="575.5" y="213.0156"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="1019.5469" style="stroke:#A80036;stroke-width:1.0;" width="10" x="575.5" y="631.0859"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="286.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="913.5" y="253.3672"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="918.5" y="297.9766"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="918.5" y="371.3281"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="918.5" y="444.6797"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="913.5" y="686.7891"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="881.4922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1121.5" y="747.1406"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="35.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1126.5" y="851.1953"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="252.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1126.5" y="941.1563"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1131.5" y="1165.5625"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="389.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1126.5" y="1238.9141"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1131.5" y="1600.6328"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1400.5" y="510.0313"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1400.5" y="1036.8594"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="211.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1559.5" y="1274.2656"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2029.5" y="976.5078"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2029.5" y="1304.6172"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2029.5" y="1364.9688"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2168.5" y="1425.3203"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318" y="1097.2109"/><rect fill="#FFFFFF" filter="url(#f1f1omeaimtvao)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2318" y="1532.2813"/><polygon fill="#A80036" points="264.5,117.9609,274.5,121.9609,264.5,125.9609,268.5,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="270.5" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="76.5" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="87.5" y="117.1045">asks to load users from a file</text><polygon fill="#A80036" points="80.5,148.3125,70.5,152.3125,80.5,156.3125,76.5,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="280.5" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="86.5" y="147.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="97.5" y="147.4561">requests data (file path name)</text><polygon fill="#A80036" points="264.5,178.6641,274.5,182.6641,264.5,186.6641,268.5,182.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="270.5" y1="182.6641" y2="182.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="76.5" y="177.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="87.5" y="177.8076">types requested data</text><polygon fill="#A80036" points="563.5,209.0156,573.5,213.0156,563.5,217.0156,567.5,213.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="286.5" x2="569.5" y1="213.0156" y2="213.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="293.5" y="208.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="304.5" y="208.1592">csvReader = createCsvReader(filePathName)</text><polygon fill="#A80036" points="842.5,239.3672,852.5,243.3672,842.5,247.3672,846.5,243.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="585.5" x2="848.5" y1="243.3672" y2="243.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="592.5" y="238.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="603.5" y="238.5107">csvReader = create(filePathName)</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="854.5" y="221.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="861.5" y="242.5488">csvR:CSVReader</text><line style="stroke:#A80036;stroke-width:1.0;" x1="928.5" x2="970.5" y1="289.9766" y2="289.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="970.5" x2="970.5" y1="289.9766" y2="302.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="929.5" x2="970.5" y1="302.9766" y2="302.9766"/><polygon fill="#A80036" points="939.5,298.9766,929.5,302.9766,939.5,306.9766,935.5,302.9766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="935.5" y="285.1201">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="946.5" y="285.1201">validatePath()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="928.5" x2="970.5" y1="363.3281" y2="363.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="970.5" x2="970.5" y1="363.3281" y2="376.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="929.5" x2="970.5" y1="376.3281" y2="376.3281"/><polygon fill="#A80036" points="939.5,372.3281,929.5,376.3281,939.5,380.3281,935.5,376.3281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="935.5" y="358.4717">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="946.5" y="358.4717">validateFile()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="928.5" x2="970.5" y1="436.6797" y2="436.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="970.5" x2="970.5" y1="436.6797" y2="449.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="929.5" x2="970.5" y1="449.6797" y2="449.6797"/><polygon fill="#A80036" points="939.5,445.6797,929.5,449.6797,939.5,453.6797,935.5,449.6797" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="935.5" y="431.8232">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="946.5" y="431.8232">separator = getFileSeparator()</text><polygon fill="#A80036" points="1388.5,506.0313,1398.5,510.0313,1388.5,514.0313,1392.5,510.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="923.5" x2="1394.5" y1="510.0313" y2="510.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="930.5" y="505.1748">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="941.5" y="505.1748">store = getSNSUserStore()</text><polygon fill="#A80036" points="80.5,566.3828,70.5,570.3828,80.5,574.3828,76.5,570.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="280.5" y1="570.3828" y2="570.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="86.5" y="565.5264">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="104.5" y="565.5264">asks to confirm action</text><polygon fill="#A80036" points="264.5,596.7344,274.5,600.7344,264.5,604.7344,268.5,600.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="270.5" y1="600.7344" y2="600.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="76.5" y="595.8779">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="94.5" y="595.8779">confirms action</text><polygon fill="#A80036" points="563.5,627.0859,573.5,631.0859,563.5,635.0859,567.5,631.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="286.5" x2="569.5" y1="631.0859" y2="631.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="293.5" y="626.2295">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="311.5" y="626.2295">csvReader.readAndUpload()</text><polygon fill="#A80036" points="901.5,682.7891,911.5,686.7891,901.5,690.7891,905.5,686.7891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="585.5" x2="907.5" y1="686.7891" y2="686.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="592.5" y="681.9326">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="610.5" y="681.9326">userDataList = csvReader.readSNSUserLineData()</text><polygon fill="#A80036" points="1109.5,743.1406,1119.5,747.1406,1109.5,751.1406,1113.5,747.1406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="585.5" x2="1115.5" y1="747.1406" y2="747.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="592.5" y="742.2842">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="610.5" y="742.2842">registListOfUsers(userDataList)</text><path d="M1038,762.1406 L1111,762.1406 L1111,770.1406 L1101,780.1406 L1038,780.1406 L1038,762.1406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="881.4922" style="stroke:#000000;stroke-width:2.0;" width="1360.5" x="1038" y="762.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1053" y="776.6357">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="139" x="1126" y="775.5596">[for each SNSUser regist]</text><path d="M1136,785.4922 L1136,811.4922 L1726,811.4922 L1726,795.4922 L1716,785.4922 L1136,785.4922 " fill="#FBFB77" filter="url(#f1f1omeaimtvao)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1716,785.4922 L1716,795.4922 L1726,795.4922 L1716,785.4922 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="569" x="1142" y="803.9873">snsUserData implies citizenCard, snsNumber, name, birthDay, phoneNumber, email, address, sex</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1131.5" x2="1178.5" y1="838.1953" y2="838.1953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1178.5" x2="1178.5" y1="838.1953" y2="851.1953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1137.5" x2="1178.5" y1="851.1953" y2="851.1953"/><polygon fill="#A80036" points="1147.5,847.1953,1137.5,851.1953,1147.5,855.1953,1143.5,851.1953" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1143.5" y="833.3389">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="1161.5" y="833.3389">snsUser = createSNSUser(snsUserData)</text><polygon fill="#A80036" points="1967.5,882.5469,1977.5,886.5469,1967.5,890.5469,1971.5,886.5469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1131.5" x2="1973.5" y1="886.5469" y2="886.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1138.5" y="881.6904">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="1156.5" y="881.6904">create(snsUserData)</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="106" x="1979.5" y="864.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="1986.5" y="885.7285">user :SNSUser</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1131.5" x2="1178.5" y1="928.1563" y2="928.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1178.5" x2="1178.5" y1="928.1563" y2="941.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1137.5" x2="1178.5" y1="941.1563" y2="941.1563"/><polygon fill="#A80036" points="1147.5,937.1563,1137.5,941.1563,1147.5,945.1563,1143.5,941.1563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1143.5" y="923.2998">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="1161.5" y="923.2998">validateSNSUser(snsUser)</text><polygon fill="#A80036" points="2017.5,972.5078,2027.5,976.5078,2017.5,980.5078,2021.5,976.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="2023.5" y1="976.5078" y2="976.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1143.5" y="971.6514">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1161.5" y="971.6514">email = getEmail(snsUser)</text><polygon fill="#A80036" points="1388.5,1032.8594,1398.5,1036.8594,1388.5,1040.8594,1392.5,1036.8594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="1394.5" y1="1036.8594" y2="1036.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1143.5" y="1032.0029">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1161.5" y="1032.0029">auth = getAuthFacade()</text><polygon fill="#A80036" points="2306,1093.2109,2316,1097.2109,2306,1101.2109,2310,1097.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="2312" y1="1097.2109" y2="1097.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1143.5" y="1092.3545">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1161.5" y="1092.3545">existsUser(email)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1141.5" x2="1183.5" y1="1157.5625" y2="1157.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1183.5" x2="1183.5" y1="1157.5625" y2="1170.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1142.5" x2="1183.5" y1="1170.5625" y2="1170.5625"/><polygon fill="#A80036" points="1152.5,1166.5625,1142.5,1170.5625,1152.5,1174.5625,1148.5,1170.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1148.5" y="1152.7061">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1166.5" y="1152.7061">checkDuplicates(snsUser)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1131.5" x2="1178.5" y1="1225.9141" y2="1225.9141"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1178.5" x2="1178.5" y1="1225.9141" y2="1238.9141"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1137.5" x2="1178.5" y1="1238.9141" y2="1238.9141"/><polygon fill="#A80036" points="1147.5,1234.9141,1137.5,1238.9141,1147.5,1242.9141,1143.5,1238.9141" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1143.5" y="1221.0576">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1161.5" y="1221.0576">saveSNSUser(snsUser)</text><polygon fill="#A80036" points="1547.5,1270.2656,1557.5,1274.2656,1547.5,1278.2656,1551.5,1274.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="1553.5" y1="1274.2656" y2="1274.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1143.5" y="1269.4092">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="1161.5" y="1269.4092">snsUserDto = toDto(snsUser)</text><polygon fill="#A80036" points="2017.5,1300.6172,2027.5,1304.6172,2017.5,1308.6172,2021.5,1304.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1569.5" x2="2023.5" y1="1304.6172" y2="1304.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1576.5" y="1299.7607">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1594.5" y="1299.7607">name = snsUser.getName()</text><polygon fill="#A80036" points="2017.5,1360.9688,2027.5,1364.9688,2017.5,1368.9688,2021.5,1364.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1569.5" x2="2023.5" y1="1364.9688" y2="1364.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1576.5" y="1360.1123">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="1594.5" y="1360.1123">email = snsUser.getEmail()</text><polygon fill="#A80036" points="2156.5,1421.3203,2166.5,1425.3203,2156.5,1429.3203,2160.5,1425.3203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1569.5" x2="2162.5" y1="1425.3203" y2="1425.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1576.5" y="1420.4639">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="1594.5" y="1420.4639">pwd = generatePwd()</text><polygon fill="#A80036" points="1833.5,1481.6719,1843.5,1485.6719,1833.5,1489.6719,1837.5,1485.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1564.5" x2="1839.5" y1="1485.6719" y2="1485.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1571.5" y="1480.8154">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="1589.5" y="1480.8154">create(name, email, pwd, "SNS_USER")</text><rect fill="#FEFECE" filter="url(#f1f1omeaimtvao)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="120" x="1845.5" y="1463.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1852.5" y="1484.8535">dto: SNSUserDto</text><polygon fill="#A80036" points="2306,1528.2813,2316,1532.2813,2306,1536.2813,2310,1532.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="2312" y1="1532.2813" y2="1532.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1143.5" y="1527.4248">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1161.5" y="1527.4248">addUserWithRole(snsUserDto)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1141.5" x2="1183.5" y1="1592.6328" y2="1592.6328"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1183.5" x2="1183.5" y1="1592.6328" y2="1605.6328"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1142.5" x2="1183.5" y1="1605.6328" y2="1605.6328"/><polygon fill="#A80036" points="1152.5,1601.6328,1142.5,1605.6328,1152.5,1609.6328,1148.5,1605.6328" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1148.5" y="1587.7764">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1166.5" y="1587.7764">addSNSUser(snsUser)</text><polygon fill="#A80036" points="75.5,1668.9844,65.5,1672.9844,75.5,1676.9844,71.5,1672.9844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="280.5" y1="1672.9844" y2="1672.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="81.5" y="1668.1279">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="99.5" y="1668.1279">informs operation success</text><!--MD5=[0ab5d879646543fd59052bcbdd747cfa]
@startuml
autonumber
'hide footbox
actor "Administrator" as ADM

participant ":UploadUserFromFileUI" as UI
participant ":RegisterSNSUserController" as CTRL
participant "csvR:CSVReader" as CSVR
participant "userSt :SNSUserStore" as USR_STR
participant "comp :Company" as COMP
participant "mapper: SNSUserMapper" as MAPPER
participant "dto: SNSUserDto" as DTO
participant "user :SNSUser" as USR
participant ":PasswordGenerator" as PWDGEN
participant "auth :AuthFacade" as AUTH
participant "userDataList :List<Array<String>>" as LIST


activate ADM
ADM -> UI : asks to load users from a file
activate UI
UI - -> ADM : requests data (file path name)
deactivate UI

ADM -> UI : types requested data
activate UI

    UI -> CTRL : csvReader = createCsvReader(filePathName)
    activate CTRL
        CTRL -> CSVR ** : csvReader = create(filePathName)
        activate CSVR

            CSVR -> CSVR : validatePath()
            activate CSVR
            deactivate CSVR

            CSVR -> CSVR : validateFile()
            activate CSVR
            deactivate CSVR 

            CSVR -> CSVR : separator = getFileSeparator()
            activate CSVR
            deactivate CSVR
            
            CSVR -> COMP : store = getSNSUserStore()
            activate COMP
            deactivate COMP

        deactivate CSVR
    deactivate CTRL

UI - -> ADM : asks to confirm action
deactivate UI

ADM -> UI : confirms action
activate UI

    UI -> CTRL : csvReader.readAndUpload()
    activate CTRL
        loop for each SNSUser regist
        CTRL -> CSVR : userDataList = csvReader.readSNSUserLineData()
        activate CSVR
            
        deactivate CSVR
        CTRL -> USR_STR : registListOfUsers(userDataList)
        activate USR_STR

        loop for each SNSUser regist
        note right of USR_STR
            snsUserData implies citizenCard, snsNumber, name, birthDay, phoneNumber, email, address, sex
        end note
        USR_STR -> USR_STR : snsUser = createSNSUser(snsUserData)
            activate USR_STR
                USR_STR -> USR** : create(snsUserData)
            deactivate USR_STR

            USR_STR -> USR_STR : validateSNSUser(snsUser)
            activate USR_STR
                USR_STR -> USR : email = getEmail(snsUser)
                activate USR
                deactivate USR

                USR_STR -> COMP : auth = getAuthFacade()
                activate COMP
                deactivate COMP

                USR_STR -> AUTH : existsUser(email)
                activate AUTH
                deactivate AUTH

                USR_STR -> USR_STR : checkDuplicates(snsUser)
                activate USR_STR
            deactivate USR_STR

            deactivate USR_STR

            USR_STR -> USR_STR : saveSNSUser(snsUser)
            activate USR_STR

                USR_STR -> MAPPER : snsUserDto = toDto(snsUser)
                activate MAPPER

                    MAPPER -> USR : name = snsUser.getName()
                    activate USR
                    deactivate USR

                    MAPPER -> USR : email = snsUser.getEmail()
                    activate USR
                    deactivate USR

                    MAPPER -> PWDGEN : pwd = generatePwd()
                    activate PWDGEN
                    deactivate PWDGEN

                    MAPPER -> DTO ** : create(name, email, pwd, "SNS_USER")

                deactivate MAPPER

            USR_STR -> AUTH : addUserWithRole(snsUserDto)
            activate AUTH
            deactivate AUTH

            USR_STR -> USR_STR : addSNSUser(snsUser)
            activate USR_STR
            deactivate USR_STR

        deactivate USR_STR
        deactivate USR_STR
        end
    deactivate CTRL

UI - -> ADM : informs operation success
deactivate UI

deactivate ADM

@enduml

@startuml
autonumber
actor "Administrator" as ADM

participant ":UploadUserFromFileUI" as UI
participant ":RegisterSNSUserController" as CTRL
participant "csvR:CSVReader" as CSVR
participant "userSt :SNSUserStore" as USR_STR
participant "comp :Company" as COMP
participant "mapper: SNSUserMapper" as MAPPER
participant "dto: SNSUserDto" as DTO
participant "user :SNSUser" as USR
participant ":PasswordGenerator" as PWDGEN
participant "auth :AuthFacade" as AUTH
participant "userDataList :List<Array<String>>" as LIST


activate ADM
ADM -> UI : asks to load users from a file
activate UI
UI - -> ADM : requests data (file path name)
deactivate UI

ADM -> UI : types requested data
activate UI

    UI -> CTRL : csvReader = createCsvReader(filePathName)
    activate CTRL
        CTRL -> CSVR ** : csvReader = create(filePathName)
        activate CSVR

            CSVR -> CSVR : validatePath()
            activate CSVR
            deactivate CSVR

            CSVR -> CSVR : validateFile()
            activate CSVR
            deactivate CSVR 

            CSVR -> CSVR : separator = getFileSeparator()
            activate CSVR
            deactivate CSVR
            
            CSVR -> COMP : store = getSNSUserStore()
            activate COMP
            deactivate COMP

        deactivate CSVR
    deactivate CTRL

UI - -> ADM : asks to confirm action
deactivate UI

ADM -> UI : confirms action
activate UI

    UI -> CTRL : csvReader.readAndUpload()
    activate CTRL
        loop for each SNSUser regist
        CTRL -> CSVR : userDataList = csvReader.readSNSUserLineData()
        activate CSVR
            
        deactivate CSVR
        CTRL -> USR_STR : registListOfUsers(userDataList)
        activate USR_STR

        loop for each SNSUser regist
        note right of USR_STR
            snsUserData implies citizenCard, snsNumber, name, birthDay, phoneNumber, email, address, sex
        end note
        USR_STR -> USR_STR : snsUser = createSNSUser(snsUserData)
            activate USR_STR
                USR_STR -> USR** : create(snsUserData)
            deactivate USR_STR

            USR_STR -> USR_STR : validateSNSUser(snsUser)
            activate USR_STR
                USR_STR -> USR : email = getEmail(snsUser)
                activate USR
                deactivate USR

                USR_STR -> COMP : auth = getAuthFacade()
                activate COMP
                deactivate COMP

                USR_STR -> AUTH : existsUser(email)
                activate AUTH
                deactivate AUTH

                USR_STR -> USR_STR : checkDuplicates(snsUser)
                activate USR_STR
            deactivate USR_STR

            deactivate USR_STR

            USR_STR -> USR_STR : saveSNSUser(snsUser)
            activate USR_STR

                USR_STR -> MAPPER : snsUserDto = toDto(snsUser)
                activate MAPPER

                    MAPPER -> USR : name = snsUser.getName()
                    activate USR
                    deactivate USR

                    MAPPER -> USR : email = snsUser.getEmail()
                    activate USR
                    deactivate USR

                    MAPPER -> PWDGEN : pwd = generatePwd()
                    activate PWDGEN
                    deactivate PWDGEN

                    MAPPER -> DTO ** : create(name, email, pwd, "SNS_USER")

                deactivate MAPPER

            USR_STR -> AUTH : addUserWithRole(snsUserDto)
            activate AUTH
            deactivate AUTH

            USR_STR -> USR_STR : addSNSUser(snsUser)
            activate USR_STR
            deactivate USR_STR

        deactivate USR_STR
        deactivate USR_STR
        end
    deactivate CTRL

UI - -> ADM : informs operation success
deactivate UI

deactivate ADM

@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 WET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>