<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1836px" preserveAspectRatio="none" style="width:2674px;height:1836px;background:#FFFFFF;" version="1.1" viewBox="0 0 2674 1836" width="2674px" zoomAndPan="magnify"><defs><filter height="300%" id="f17m8uugvk4j3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="1633.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="59.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="387.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="1132.6016" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="600.7344"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="327.0156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="575.5" y="213.0156"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="1079.8984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="575.5" y="631.0859"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="286.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="876.5" y="253.3672"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="881.5" y="297.9766"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="881.5" y="371.3281"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="881.5" y="444.6797"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="876.5" y="686.7891"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="948.8438" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1084.5" y="747.1406"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="35.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1089.5" y="851.1953"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="252.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1089.5" y="941.1563"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1094.5" y="1165.5625"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="457.0703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1089.5" y="1238.9141"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1094.5" y="1600.6328"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1363.5" y="510.0313"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1363.5" y="1036.8594"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="211.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1509" y="1274.2656"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1952" y="976.5078"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1952" y="1304.6172"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1952" y="1364.9688"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091" y="1425.3203"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2240.5" y="1097.2109"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2240.5" y="1532.2813"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2367" y="1665.9844"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="941.8438" style="stroke:#000000;stroke-width:2.0;" width="1432" x="1001" y="762.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="281.5" x2="281.5" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="580.5" x2="580.5" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="881.5" x2="881.5" y1="254.3203" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1089" x2="1089" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1368.5" x2="1368.5" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1513.5" x2="1513.5" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1843" x2="1843" y1="1496.625" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1957" x2="1957" y1="897.5" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2096" x2="2096" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2245" x2="2245" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2372" x2="2372" y1="89.6094" y2="1751.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2548" x2="2548" y1="89.6094" y2="1751.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="20" y="86.5332">Administrator</text><ellipse cx="64.5" cy="15" fill="#FEFECE" filter="url(#f17m8uugvk4j3)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M64.5,23 L64.5,50 M51.5,31 L77.5,31 M64.5,50 L51.5,65 M64.5,50 L77.5,65 " fill="none" filter="url(#f17m8uugvk4j3)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="20" y="1764.8691">Administrator</text><ellipse cx="64.5" cy="1777.9453" fill="#FEFECE" filter="url(#f17m8uugvk4j3)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M64.5,1785.9453 L64.5,1812.9453 M51.5,1793.9453 L77.5,1793.9453 M64.5,1812.9453 L51.5,1827.9453 M64.5,1812.9453 L77.5,1827.9453 " fill="none" filter="url(#f17m8uugvk4j3)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="166" x="196.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="203.5" y="74.5332">:UploadUsersFromFileUI</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="166" x="196.5" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="203.5" y="1771.8691">:UploadUsersFromFileUI</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="216" x="470.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="477.5" y="74.5332">:UploadUsersFromFileController</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="216" x="470.5" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="477.5" y="1771.8691">:UploadUsersFromFileController</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="817.5" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="824.5" y="1771.8691">csvR:CSVReader</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="153" x="1011" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1018" y="74.5332">userSt :SNSUserStore</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="153" x="1011" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1018" y="1771.8691">userSt :SNSUserStore</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1308.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1315.5" y="74.5332">comp :Company</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1308.5" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1315.5" y="1771.8691">comp :Company</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="147" x="1438.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="1445.5" y="74.5332">mapper: UserMapper</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="147" x="1438.5" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="1445.5" y="1771.8691">mapper: UserMapper</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1795" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1802" y="1771.8691">dto: UserDto</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="106" x="1902" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="1909" y="1771.8691">user :SNSUser</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="144" x="2022" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2029" y="74.5332">:PasswordGenerator</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="144" x="2022" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="2029" y="1771.8691">:PasswordGenerator</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="127" x="2180" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="2187" y="74.5332">auth :AuthFacade</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="127" x="2180" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="2187" y="1771.8691">auth :AuthFacade</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="98" x="2321" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="2328" y="74.5332">:EmailSender</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="98" x="2321" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="2328" y="1771.8691">:EmailSender</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="227" x="2433" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="2440" y="74.5332">userDataList :List&lt;Array&lt;String&gt;&gt;</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="227" x="2433" y="1750.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="2440" y="1771.8691">userDataList :List&lt;Array&lt;String&gt;&gt;</text><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="1633.7266" style="stroke:#A80036;stroke-width:1.0;" width="10" x="59.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="387.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="1132.6016" style="stroke:#A80036;stroke-width:1.0;" width="10" x="276.5" y="600.7344"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="327.0156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="575.5" y="213.0156"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="1079.8984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="575.5" y="631.0859"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="286.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="876.5" y="253.3672"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="881.5" y="297.9766"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="881.5" y="371.3281"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="881.5" y="444.6797"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="876.5" y="686.7891"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="948.8438" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1084.5" y="747.1406"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="35.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1089.5" y="851.1953"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="252.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1089.5" y="941.1563"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1094.5" y="1165.5625"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="457.0703" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1089.5" y="1238.9141"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1094.5" y="1600.6328"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1363.5" y="510.0313"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1363.5" y="1036.8594"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="211.4063" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1509" y="1274.2656"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1952" y="976.5078"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1952" y="1304.6172"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1952" y="1364.9688"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091" y="1425.3203"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2240.5" y="1097.2109"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2240.5" y="1532.2813"/><rect fill="#FFFFFF" filter="url(#f17m8uugvk4j3)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2367" y="1665.9844"/><polygon fill="#A80036" points="264.5,117.9609,274.5,121.9609,264.5,125.9609,268.5,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="270.5" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="76.5" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="87.5" y="117.1045">asks to load users from a file</text><polygon fill="#A80036" points="80.5,148.3125,70.5,152.3125,80.5,156.3125,76.5,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="280.5" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="86.5" y="147.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="97.5" y="147.4561">requests data (file path name)</text><polygon fill="#A80036" points="264.5,178.6641,274.5,182.6641,264.5,186.6641,268.5,182.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="270.5" y1="182.6641" y2="182.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="76.5" y="177.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="87.5" y="177.8076">types requested data</text><polygon fill="#A80036" points="563.5,209.0156,573.5,213.0156,563.5,217.0156,567.5,213.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="286.5" x2="569.5" y1="213.0156" y2="213.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="293.5" y="208.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="304.5" y="208.1592">csvReader = createCsvReader(filePathName)</text><polygon fill="#A80036" points="805.5,239.3672,815.5,243.3672,805.5,247.3672,809.5,243.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="585.5" x2="811.5" y1="243.3672" y2="243.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="592.5" y="238.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="603.5" y="238.5107">csvReader = create(filePathName)</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="124" x="817.5" y="221.0156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="824.5" y="242.5488">csvR:CSVReader</text><line style="stroke:#A80036;stroke-width:1.0;" x1="891.5" x2="933.5" y1="289.9766" y2="289.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="933.5" x2="933.5" y1="289.9766" y2="302.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="892.5" x2="933.5" y1="302.9766" y2="302.9766"/><polygon fill="#A80036" points="902.5,298.9766,892.5,302.9766,902.5,306.9766,898.5,302.9766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="898.5" y="285.1201">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="909.5" y="285.1201">validatePath()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="891.5" x2="933.5" y1="363.3281" y2="363.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="933.5" x2="933.5" y1="363.3281" y2="376.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="892.5" x2="933.5" y1="376.3281" y2="376.3281"/><polygon fill="#A80036" points="902.5,372.3281,892.5,376.3281,902.5,380.3281,898.5,376.3281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="898.5" y="358.4717">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="909.5" y="358.4717">validateFile()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="891.5" x2="933.5" y1="436.6797" y2="436.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="933.5" x2="933.5" y1="436.6797" y2="449.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="892.5" x2="933.5" y1="449.6797" y2="449.6797"/><polygon fill="#A80036" points="902.5,445.6797,892.5,449.6797,902.5,453.6797,898.5,449.6797" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="898.5" y="431.8232">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="909.5" y="431.8232">separator = getFileSeparator()</text><polygon fill="#A80036" points="1351.5,506.0313,1361.5,510.0313,1351.5,514.0313,1355.5,510.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="886.5" x2="1357.5" y1="510.0313" y2="510.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="893.5" y="505.1748">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="904.5" y="505.1748">store = getSNSUserStore()</text><polygon fill="#A80036" points="80.5,566.3828,70.5,570.3828,80.5,574.3828,76.5,570.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="280.5" y1="570.3828" y2="570.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="86.5" y="565.5264">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="104.5" y="565.5264">asks to confirm action</text><polygon fill="#A80036" points="264.5,596.7344,274.5,600.7344,264.5,604.7344,268.5,600.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="270.5" y1="600.7344" y2="600.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="76.5" y="595.8779">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="94.5" y="595.8779">confirms action</text><polygon fill="#A80036" points="563.5,627.0859,573.5,631.0859,563.5,635.0859,567.5,631.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="286.5" x2="569.5" y1="631.0859" y2="631.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="293.5" y="626.2295">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="311.5" y="626.2295">readAndUpload()</text><polygon fill="#A80036" points="864.5,682.7891,874.5,686.7891,864.5,690.7891,868.5,686.7891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="585.5" x2="870.5" y1="686.7891" y2="686.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="592.5" y="681.9326">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="610.5" y="681.9326">userDataList = readSNSUsersData()</text><polygon fill="#A80036" points="1072.5,743.1406,1082.5,747.1406,1072.5,751.1406,1076.5,747.1406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="585.5" x2="1078.5" y1="747.1406" y2="747.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="592.5" y="742.2842">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="610.5" y="742.2842">registListOfUsers(userDataList)</text><path d="M1001,762.1406 L1074,762.1406 L1074,770.1406 L1064,780.1406 L1001,780.1406 L1001,762.1406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="941.8438" style="stroke:#000000;stroke-width:2.0;" width="1432" x="1001" y="762.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="1016" y="776.6357">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="139" x="1089" y="775.5596">[for each SNSUser regist]</text><path d="M1099,785.4922 L1099,811.4922 L1689,811.4922 L1689,795.4922 L1679,785.4922 L1099,785.4922 " fill="#FBFB77" filter="url(#f17m8uugvk4j3)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1679,785.4922 L1679,795.4922 L1689,795.4922 L1679,785.4922 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="569" x="1105" y="803.9873">snsUserData implies citizenCard, snsNumber, name, birthDay, phoneNumber, email, address, sex</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1094.5" x2="1141.5" y1="838.1953" y2="838.1953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1141.5" x2="1141.5" y1="838.1953" y2="851.1953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1100.5" x2="1141.5" y1="851.1953" y2="851.1953"/><polygon fill="#A80036" points="1110.5,847.1953,1100.5,851.1953,1110.5,855.1953,1106.5,851.1953" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="833.3389">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="1124.5" y="833.3389">snsUser = createSNSUser(snsUserData)</text><polygon fill="#A80036" points="1890,882.5469,1900,886.5469,1890,890.5469,1894,886.5469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1094.5" x2="1896" y1="886.5469" y2="886.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1101.5" y="881.6904">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="1119.5" y="881.6904">create(snsUserData)</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="106" x="1902" y="864.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="1909" y="885.7285">user :SNSUser</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1094.5" x2="1141.5" y1="928.1563" y2="928.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1141.5" x2="1141.5" y1="928.1563" y2="941.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1100.5" x2="1141.5" y1="941.1563" y2="941.1563"/><polygon fill="#A80036" points="1110.5,937.1563,1100.5,941.1563,1110.5,945.1563,1106.5,941.1563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="923.2998">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="1124.5" y="923.2998">validateSNSUser(snsUser)</text><polygon fill="#A80036" points="1940,972.5078,1950,976.5078,1940,980.5078,1944,976.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1099.5" x2="1946" y1="976.5078" y2="976.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="971.6514">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1124.5" y="971.6514">email = getEmail(snsUser)</text><polygon fill="#A80036" points="1351.5,1032.8594,1361.5,1036.8594,1351.5,1040.8594,1355.5,1036.8594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1099.5" x2="1357.5" y1="1036.8594" y2="1036.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="1032.0029">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1124.5" y="1032.0029">auth = getAuthFacade()</text><polygon fill="#A80036" points="2228.5,1093.2109,2238.5,1097.2109,2228.5,1101.2109,2232.5,1097.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1099.5" x2="2234.5" y1="1097.2109" y2="1097.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="1092.3545">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1124.5" y="1092.3545">existsUser(email)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1104.5" x2="1146.5" y1="1157.5625" y2="1157.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1146.5" x2="1146.5" y1="1157.5625" y2="1170.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1105.5" x2="1146.5" y1="1170.5625" y2="1170.5625"/><polygon fill="#A80036" points="1115.5,1166.5625,1105.5,1170.5625,1115.5,1174.5625,1111.5,1170.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1111.5" y="1152.7061">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1129.5" y="1152.7061">checkDuplicates(snsUser)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1094.5" x2="1141.5" y1="1225.9141" y2="1225.9141"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1141.5" x2="1141.5" y1="1225.9141" y2="1238.9141"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1100.5" x2="1141.5" y1="1238.9141" y2="1238.9141"/><polygon fill="#A80036" points="1110.5,1234.9141,1100.5,1238.9141,1110.5,1242.9141,1106.5,1238.9141" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="1221.0576">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1124.5" y="1221.0576">saveSNSUser(snsUser)</text><polygon fill="#A80036" points="1497,1270.2656,1507,1274.2656,1497,1278.2656,1501,1274.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1099.5" x2="1503" y1="1274.2656" y2="1274.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="1269.4092">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="1124.5" y="1269.4092">userDto = toDto(snsUser)</text><polygon fill="#A80036" points="1940,1300.6172,1950,1304.6172,1940,1308.6172,1944,1304.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1519" x2="1946" y1="1304.6172" y2="1304.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1526" y="1299.7607">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="1544" y="1299.7607">name = getName()</text><polygon fill="#A80036" points="1940,1360.9688,1950,1364.9688,1940,1368.9688,1944,1364.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1519" x2="1946" y1="1364.9688" y2="1364.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1526" y="1360.1123">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="1544" y="1360.1123">email = getEmail()</text><polygon fill="#A80036" points="2079,1421.3203,2089,1425.3203,2079,1429.3203,2083,1425.3203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1519" x2="2085" y1="1425.3203" y2="1425.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1526" y="1420.4639">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="1544" y="1420.4639">pwd = generatePwd()</text><polygon fill="#A80036" points="1783,1481.6719,1793,1485.6719,1783,1489.6719,1787,1485.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1514" x2="1789" y1="1485.6719" y2="1485.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1521" y="1480.8154">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="1539" y="1480.8154">create(name, email, pwd, "SNS_USER")</text><rect fill="#FEFECE" filter="url(#f17m8uugvk4j3)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1795" y="1463.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1802" y="1484.8535">dto: UserDto</text><polygon fill="#A80036" points="2228.5,1528.2813,2238.5,1532.2813,2228.5,1536.2813,2232.5,1532.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1099.5" x2="2234.5" y1="1532.2813" y2="1532.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="1527.4248">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1124.5" y="1527.4248">addUserWithRole(snsUserDto)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1104.5" x2="1146.5" y1="1592.6328" y2="1592.6328"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1146.5" x2="1146.5" y1="1592.6328" y2="1605.6328"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1105.5" x2="1146.5" y1="1605.6328" y2="1605.6328"/><polygon fill="#A80036" points="1115.5,1601.6328,1105.5,1605.6328,1115.5,1609.6328,1111.5,1605.6328" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1111.5" y="1587.7764">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1129.5" y="1587.7764">addSNSUser(snsUser)</text><polygon fill="#A80036" points="2355,1661.9844,2365,1665.9844,2355,1669.9844,2359,1665.9844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1099.5" x2="2361" y1="1665.9844" y2="1665.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1106.5" y="1661.1279">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1124.5" y="1661.1279">sendEmail(email)</text><polygon fill="#A80036" points="75.5,1729.3359,65.5,1733.3359,75.5,1737.3359,71.5,1733.3359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="280.5" y1="1733.3359" y2="1733.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="81.5" y="1728.4795">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="99.5" y="1728.4795">informs operation success</text><!--MD5=[85516decf4499327a222d6b54a144a67]
@startuml
autonumber
'hide footbox
actor "Administrator" as ADM

participant ":UploadUsersFromFileUI" as UI
participant ":UploadUsersFromFileController" as CTRL
participant "csvR:CSVReader" as CSVR
participant "userSt :SNSUserStore" as USR_STR
participant "comp :Company" as COMP
participant "mapper: UserMapper" as MAPPER
participant "dto: UserDto" as DTO
participant "user :SNSUser" as USR
participant ":PasswordGenerator" as PWDGEN
participant "auth :AuthFacade" as AUTH
participant ":EmailSender" as EMAIl
participant "userDataList :List<Array<String>>" as LIST

activate ADM
ADM -> UI : asks to load users from a file
activate UI
UI - -> ADM : requests data (file path name)
deactivate UI

ADM -> UI : types requested data
activate UI

    UI -> CTRL : csvReader = createCsvReader(filePathName)
    activate CTRL
        CTRL -> CSVR ** : csvReader = create(filePathName)
        activate CSVR

            CSVR -> CSVR : validatePath()
            activate CSVR
            deactivate CSVR

            CSVR -> CSVR : validateFile()
            activate CSVR
            deactivate CSVR 

            CSVR -> CSVR : separator = getFileSeparator()
            activate CSVR
            deactivate CSVR
            
            CSVR -> COMP : store = getSNSUserStore()
            activate COMP
            deactivate COMP

        deactivate CSVR
    deactivate CTRL

UI - -> ADM : asks to confirm action
deactivate UI

ADM -> UI : confirms action
activate UI

    UI -> CTRL : readAndUpload()
    activate CTRL
        loop for each SNSUser regist
        CTRL -> CSVR : userDataList = readSNSUsersData()
        activate CSVR
            
        deactivate CSVR
        CTRL -> USR_STR : registListOfUsers(userDataList)
        activate USR_STR

        loop for each SNSUser regist
        note right of USR_STR
            snsUserData implies citizenCard, snsNumber, name, birthDay, phoneNumber, email, address, sex
        end note
        USR_STR -> USR_STR : snsUser = createSNSUser(snsUserData)
            activate USR_STR
                USR_STR -> USR** : create(snsUserData)
            deactivate USR_STR

            USR_STR -> USR_STR : validateSNSUser(snsUser)
            activate USR_STR
                USR_STR -> USR : email = getEmail(snsUser)
                activate USR
                deactivate USR

                USR_STR -> COMP : auth = getAuthFacade()
                activate COMP
                deactivate COMP

                USR_STR -> AUTH : existsUser(email)
                activate AUTH
                deactivate AUTH

                USR_STR -> USR_STR : checkDuplicates(snsUser)
                activate USR_STR
            deactivate USR_STR

            deactivate USR_STR

            USR_STR -> USR_STR : saveSNSUser(snsUser)
            activate USR_STR

                USR_STR -> MAPPER : userDto = toDto(snsUser)
                activate MAPPER

                    MAPPER -> USR : name = getName()
                    activate USR
                    deactivate USR

                    MAPPER -> USR : email = getEmail()
                    activate USR
                    deactivate USR

                    MAPPER -> PWDGEN : pwd = generatePwd()
                    activate PWDGEN
                    deactivate PWDGEN

                    MAPPER -> DTO ** : create(name, email, pwd, "SNS_USER")

                deactivate MAPPER

            USR_STR -> AUTH : addUserWithRole(snsUserDto)
            activate AUTH
            deactivate AUTH

            USR_STR -> USR_STR : addSNSUser(snsUser)
            activate USR_STR
            deactivate USR_STR
           
            USR_STR -> EMAIl : sendEmail(email)
      
            activate EMAIl
            deactivate EMAIl

        deactivate USR_STR
        deactivate USR_STR
        end
    deactivate CTRL

UI - -> ADM : informs operation success
deactivate UI

deactivate ADM

@enduml

@startuml
autonumber
actor "Administrator" as ADM

participant ":UploadUsersFromFileUI" as UI
participant ":UploadUsersFromFileController" as CTRL
participant "csvR:CSVReader" as CSVR
participant "userSt :SNSUserStore" as USR_STR
participant "comp :Company" as COMP
participant "mapper: UserMapper" as MAPPER
participant "dto: UserDto" as DTO
participant "user :SNSUser" as USR
participant ":PasswordGenerator" as PWDGEN
participant "auth :AuthFacade" as AUTH
participant ":EmailSender" as EMAIl
participant "userDataList :List<Array<String>>" as LIST

activate ADM
ADM -> UI : asks to load users from a file
activate UI
UI - -> ADM : requests data (file path name)
deactivate UI

ADM -> UI : types requested data
activate UI

    UI -> CTRL : csvReader = createCsvReader(filePathName)
    activate CTRL
        CTRL -> CSVR ** : csvReader = create(filePathName)
        activate CSVR

            CSVR -> CSVR : validatePath()
            activate CSVR
            deactivate CSVR

            CSVR -> CSVR : validateFile()
            activate CSVR
            deactivate CSVR 

            CSVR -> CSVR : separator = getFileSeparator()
            activate CSVR
            deactivate CSVR
            
            CSVR -> COMP : store = getSNSUserStore()
            activate COMP
            deactivate COMP

        deactivate CSVR
    deactivate CTRL

UI - -> ADM : asks to confirm action
deactivate UI

ADM -> UI : confirms action
activate UI

    UI -> CTRL : readAndUpload()
    activate CTRL
        loop for each SNSUser regist
        CTRL -> CSVR : userDataList = readSNSUsersData()
        activate CSVR
            
        deactivate CSVR
        CTRL -> USR_STR : registListOfUsers(userDataList)
        activate USR_STR

        loop for each SNSUser regist
        note right of USR_STR
            snsUserData implies citizenCard, snsNumber, name, birthDay, phoneNumber, email, address, sex
        end note
        USR_STR -> USR_STR : snsUser = createSNSUser(snsUserData)
            activate USR_STR
                USR_STR -> USR** : create(snsUserData)
            deactivate USR_STR

            USR_STR -> USR_STR : validateSNSUser(snsUser)
            activate USR_STR
                USR_STR -> USR : email = getEmail(snsUser)
                activate USR
                deactivate USR

                USR_STR -> COMP : auth = getAuthFacade()
                activate COMP
                deactivate COMP

                USR_STR -> AUTH : existsUser(email)
                activate AUTH
                deactivate AUTH

                USR_STR -> USR_STR : checkDuplicates(snsUser)
                activate USR_STR
            deactivate USR_STR

            deactivate USR_STR

            USR_STR -> USR_STR : saveSNSUser(snsUser)
            activate USR_STR

                USR_STR -> MAPPER : userDto = toDto(snsUser)
                activate MAPPER

                    MAPPER -> USR : name = getName()
                    activate USR
                    deactivate USR

                    MAPPER -> USR : email = getEmail()
                    activate USR
                    deactivate USR

                    MAPPER -> PWDGEN : pwd = generatePwd()
                    activate PWDGEN
                    deactivate PWDGEN

                    MAPPER -> DTO ** : create(name, email, pwd, "SNS_USER")

                deactivate MAPPER

            USR_STR -> AUTH : addUserWithRole(snsUserDto)
            activate AUTH
            deactivate AUTH

            USR_STR -> USR_STR : addSNSUser(snsUser)
            activate USR_STR
            deactivate USR_STR
           
            USR_STR -> EMAIl : sendEmail(email)
      
            activate EMAIl
            deactivate EMAIl

        deactivate USR_STR
        deactivate USR_STR
        end
    deactivate CTRL

UI - -> ADM : informs operation success
deactivate UI

deactivate ADM

@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 WET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>